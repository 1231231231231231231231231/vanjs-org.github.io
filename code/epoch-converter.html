<!DOCTYPE html>
<html>
  <head>
    <link rel="icon" href="/logo.svg">
    <title>Hello</title>
    <meta charset="UTF-8">
  </head>
  <body>
    <script type="module">
      import van from "./van-latest.min.js"

      const {b, button, div, i, input} = van.tags

      const tsToDate = ts => {
        if (ts < 1e10) return new Date(ts * 1e3)
        if (ts < 1e13) return new Date(ts)
        if (ts < 1e16) return new Date(ts / 1e3)
        return new Date(ts / 1e6)
      }

      const Converter = () => {
        const nowTs = van.state(Math.floor(new Date().getTime() / 1e3))
        setInterval(() => ++nowTs.val, 1000)
        const inputDom = input({type: "text", size: 25, value: nowTs.val})
        let dateStrDom
        const resultDom = div(
          div(b("Now: "), nowTs),
          inputDom, " ",
          button({
            onclick: () => {
              const date = tsToDate(Number(inputDom.value))
              dateStrDom?.remove()
              dateStrDom = resultDom.appendChild(div(
                div(date.toString()),
                div(b("GMT: "), date.toGMTString()),
              ))
            }
          }, "Convert"),
          div(i("Supports Unix timestamps in seconds, milliseconds, microseconds and nanoseconds.")),
        )
        return resultDom
      }

      van.add(document.body, Converter())
    </script>
  </body>
</html>
